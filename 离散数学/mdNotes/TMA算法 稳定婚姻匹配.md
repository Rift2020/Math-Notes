TMA算法 稳定婚姻匹配 

仅仅只是当作6.042 course7的笔记

问题：

有n个男生和n个女生，每个人都对n个异性的喜欢程度做了排序，如何确定一种**稳定的结婚方案**(假设只与异性结婚)？

稳定指的是：

对于任意男生a和任意女生b，设a的配偶为a'，b的配偶为b'，都**不存在1，2同时成真**的情况

1.a与b不是夫妻

2.a'与b，a更喜欢b，且a与b'，b更喜欢a



如果1，2同时成真，那么没有什么能够阻止a与b私奔，我们称**(a,b)为流氓夫妻**

**算法实现**:

每个男生将会有一个表，按照喜欢程度降序排序，即第一个女生是最喜欢的

对于每一轮：

(1)每个男生都到表中最喜欢的女生楼下唱小夜曲

(2)女生从今晚唱小夜曲的男生中选择她最喜欢一个留下，告知被留下者明天再来，然后驱逐其他人，告诉他们永远她不会和他们结婚

(3)被驱逐的男生将驱逐者从表中去除



直到某一轮结束后，每个女生楼下都有且仅有一个男生,即当晚没有人被驱逐，算法结束

**部分证明**:

**1.**最坏轮数< n^2+1$,最坏时间复杂度应该是:$O(n^3)$(我自己算的复杂度，不敢保证一定正确)

最坏轮数证明：

每轮至少驱逐一个人，否则该轮算法就结束了，而驱逐一个人意味着名单上少了一个人。

所有男生名单人数之和是$n^2$，每轮至少减1，因此至多减$n^2$轮

**2.每个人都将结婚**

Lemma1:如果一个女孩G赶走了一个男孩B，那么这个女孩G会有另外一个追求者

lemma1的证明可以用归纳法证明,蛮显然的，这里不证了。

2的证明(反证):如果存在一个男生B没有结婚，那么他被所有的女生都拒绝过了，因此所有的女生都有一个追求者可以结婚，但女生和男生数量相等，所以所有男生也结婚了，矛盾。如果存在一个女生没有结婚，那么一定会有一个男生没有结婚，回到前面那种情况

**3.不存在流氓夫妻**(反证):

如果存在一对流氓夫妻(B,G)

那么他们没有结婚只有两种可能：

(1)G拒绝了B

(2)B没有去过G的楼下

结合lemma1，我们知道留在女生那里的男生只会越来越好(对那个女生来讲)，因此G的丈夫一定好过B

如果B没有去过G楼下，这说明B的妻子相比G，在B的名单的更前面，因此B更喜欢她的妻子

矛盾

所以流氓夫妻不存在

**4.平衡性**讨论

显然，稳定婚姻匹配可能解不止有一种

对于每个男生来说，TMA都会为他们找到可行的配偶中的最佳配偶

对于每个女生来说，TMA都会为她们找到可行的配偶中的最差配偶

可行的含义：与他/她结婚，至少存在于一种可行解中

也就是说不可行指的是：与他/她结婚，其他人不管怎么结婚，一定会产生流氓夫妻

(无证明)



也没有代码，这个算法还是相当好写的有一说一。